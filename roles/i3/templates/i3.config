# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!


set $mod Mod4
set $ctrl Control

# --- System command variables ---

set $syslauncher krunner
set $syscenter plasmawindowed org.kde.plasma.kicker
set $systerminal terminator
set $sysexplorer xdg-open $HOME/
set $sysscreenshot ksnip -r
set $sysfileedit terminator --working-directory=$HOME -e vim
set $i3config vim $HOME/.config/i3/config
set $sshadd terminator -x bash -i -c 'ssh-add; bash'

# --- Behaviour configuration ---

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:monospace 8

# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).
#font pango:DejaVu Sans Mono 8

# The combination of xss-lock, nm-applet and pactl is a popular choice, so
# they are included here as an example. Modify as you see fit.

# xss-lock grabs a logind suspend inhibit lock and will use i3lock to lock the
# screen before suspend. Use loginctl lock-session to lock your screen.
exec --no-startup-id xss-lock --transfer-sleep-lock -- i3lock --nofork

# NetworkManager is the most popular way to manage wireless networks on Linux,
# and nm-applet is a desktop environment-independent system tray GUI for it.
exec --no-startup-id nm-applet


# --- Taskbar ---

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)

bar {
        verbose yes
        tray_output primary
        tray_output eDP-1
        tray_output HDMI-1
        status_command i3status
}


# --- Mouse bindings ---

# Use Mouse+$mod to drag floating windows to their wanted position
#floating_modifier $mod

# The middle button over a titlebar kills the window
bindsym --release button2 kill

# The right button toggles floating
bindsym button3 floating toggle


# --- Applications/utilitaries (most controls based on mod+ctrl) ---

# at booting
exec --no-startup-id firefox
exec --no-startup-id $sshadd

# start dmenu (a program launcher)
bindsym $mod+d exec dmenu_run
# There also is the (new) i3-dmenu-desktop which only displays applications
# shipping a .desktop file. It is a wrapper around dmenu, so you need that
# installed.
bindsym $mod+Shift+d exec --no-startup-id i3-dmenu-desktop

# control center
bindsym $mod+$ctrl+m exec $syscenter
# system monitor
#bindsym $mod+$ctrl+l exec konsole htop
# app launcher
bindsym $mod+$ctrl+k exec $syslauncher
# start a terminal
bindsym $mod+$ctrl+t exec $systerminal
# take screenschot
bindsym $mod+$ctrl+c exec $sysscreenshot
# start gimp
bindsym $mod+$ctrl+g exec gimp
# open new file to edit
bindsym $mod+$ctrl+w exec $sysfileedit
# open web browser
bindsym $mod+$ctrl+b exec firefox
# open file browser
bindsym $mod+$ctrl+s exec $sysexplorer
# open i3 config file
bindsym $mod+$ctrl+i exec $i3config

# Focus a particular app with mod+ctrl+shift+.
# Drag back a particular app to the current WS with mod+ctrl+alt+.

# Focus firefox and drag it back into the current WS
bindsym $mod+$ctrl+Shift+b [class="(?i)firefox"] focus
bindsym $mod+$ctrl+Mod1+b [class="(?i)firefox"] move workspace current
# Focus a terminal and drag it back into the current WS
bindsym $mod+$ctrl+Shift+t [class="(?i).*term.*"] focus
bindsym $mod+$ctrl+Mod1+t [class="(?i).*term.*"] move workspace current
# Focus discord and drag it back into the current WS
bindsym $mod+$ctrl+Shift+d [class="(?i).*discord.*"] focus
bindsym $mod+$ctrl+Mod1+d [class="(?i).*discord.*"] move workspace current


# --- Actions on containers ---

# kill focused window
bindsym $mod+Shift+a kill

# change focus with the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move container with the cursor keys:
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# split in horizontal orientation
bindsym $mod+h split h

# split in vertical orientation
bindsym $mod+v split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacked
bindsym $mod+z layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $mod+q focus parent

# focus the child container
bindsym $mod+w focus child

# resize window (you can also use the mouse for that)
mode "resize" {
        
        # shrinking and expanding
        bindsym Left resize shrink width 20 px or 10 ppt
        bindsym Down resize grow height 20 px or 10 ppt
        bindsym Up resize shrink height 20 px or 10 ppt
        bindsym Right resize grow width 20 px or 10 ppt

        # back to normal: Enter or Escape or $mod+r
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+r mode "default"
}

bindsym $mod+r mode "resize"


# --- Actions on workspaces ---

# Define names for default workspaces for which we configure key bindings later on.
# We use variables to avoid repeating the names in multiple places.
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

# switch to workspace
bindsym $mod+ampersand workspace number $ws1
bindsym $mod+eacute workspace number $ws2
bindsym $mod+quotedbl workspace number $ws3
bindsym $mod+apostrophe workspace number $ws4
bindsym $mod+parenleft workspace number $ws5
bindsym $mod+section workspace number $ws6
bindsym $mod+egrave workspace number $ws7
bindsym $mod+exclam workspace number $ws8
bindsym $mod+ccedilla workspace number $ws9
bindsym $mod+agrave workspace number $ws10

# move focused container to workspace
bindsym $mod+Shift+ampersand move container to workspace number $ws1
bindsym $mod+Shift+eacute move container to workspace number $ws2
bindsym $mod+Shift+quotedbl move container to workspace number $ws3
bindsym $mod+Shift+apostrophe move container to workspace number $ws4
bindsym $mod+Shift+parenleft move container to workspace number $ws5
bindsym $mod+Shift+section move container to workspace number $ws6
bindsym $mod+Shift+egrave move container to workspace number $ws7
bindsym $mod+Shift+exclam move container to workspace number $ws8
bindsym $mod+Shift+ccedilla move container to workspace number $ws9
bindsym $mod+Shift+agrave move container to workspace number $ws10

# move focus on left/right monitor with bottom numerical keypad (Mod2 doesn't have to be pressed but needed, see https://github.com/i3/i3/issues/2558)
bindsym $mod+Mod2+KP_1 focus output left
bindsym $mod+Mod2+KP_3 focus output right

# move the current focused container to the left/right monitor
bindsym $mod+Mod2+KP_4 move container to output left;focus output left
bindsym $mod+Mod2+KP_6 move container to output right;focus output right

# move current workspace to left/right monitor 
bindsym $mod+Mod2+KP_7 move workspace to output left
bindsym $mod+Mod2+KP_9 move workspace to output right

# Make the currently focused window a scratchpad
bindsym $mod+Shift+x move scratchpad

# Show the first scratchpad window
bindsym $mod+x scratchpad show

# --- Marks ---

# mark the focused container with 'target' mark and highlight it
bindsym $mod+m mark target;title_format "<span background='red'>%title</span>"

# unmark the focused container and reset its title color
bindsym $mod+u unmark;title_format "%title"

# go to the first container previously marked 'target'
bindsym $mod+Shift+m [con_mark="target"] focus
# drag back the container previously marked 'target' to the current workspace 
bindsym $mod+Mod1+m [con_mark="target"] move workspace current

# read 1 character and mark the current window with this character
bindsym $mod+n exec i3-input -F 'mark %s' -l 1 -P 'Mark: '

# read 1 character and go to the window with the character
bindsym $mod+Shift+n exec i3-input -F '[con_mark="%s"] focus' -l 1 -P 'Goto: '
bindsym $mod+Mod1+n exec i3-input -F '[con_mark="%s"] move workspace current' -l 1 -P 'Drag here: '

# change color title in fashion green
bindsym $mod+k title_format "<span background='green'>%title</span>"

# --- Shortcuts for diverse actions ---

# Use pactl to adjust volume in PulseAudio.
set $refresh_i3status killall -SIGUSR1 i3status

# More noise (vol up or mod+*)
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10% && $refresh_i3status
bindsym $mod+asterisk exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10% && $refresh_i3status

# Less noise (vol down or mod+/)
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10% && $refresh_i3status
bindsym $mod+slash exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10% && $refresh_i3status

# Toggle mute (mod+Shift+(*|/))
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status
bindsym $mod+Shift+asterisk exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status
bindsym $mod+Shift+slash exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status

# Toggle mic mute
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle && $refresh_i3status


# reload the configuration file
bindsym $mod+Shift+i reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+o restart
# exit i3 (logs you out of your X session)
#bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -B 'Yes, exit i3' 'i3-msg exit'"


# KDE specific
for_window [title="Desktop — Plasma"] kill; floating enable; 
for_window [class="plasmashell"] floating enable;
for_window [class="Plasma"] floating enable;
for_window [title="plasma-desktop"] floating enable;
for_window [title="win7"] floating enable; 
for_window [class="krunner"] floating enable; 
for_window [class="Kmix"] floating enable; 
for_window [class="Klipper"] floating enable; 
for_window [class="Plasmoidviewer"] floating enable; 
for_window [class="(?i)*nextcloud*"] floating disable
for_window [class="plasmashell" window_type="notification"] floating enable, move right 700px, move down 450px;
no_focus [class="plasmashell" window_type="notification"] 
for_window [title="System Tray"] floating enable, floating_maximum_size 100px x 100px;

bindsym $mod+t exec plasmawindowed org.kde.plasma.systemtray


# --- Execute additional actions after i3 (re)started ---
exec_always --no-startup-id bash $HOME/.config/i3/i3starting.sh
